{% extends 'html/layout.jinja' %}
{% block title %} &raquo; {{ page.name }}{% endblock %}
{% block heading %} &raquo; {{ page.name }}{% endblock %}
<!-- show.js should be loaded with a script tag to keep markup clean -->
{% block head %}{% include 'html/show.js.jinja' %}{% endblock %}
{% block content %}
  
  <a href="#" id="edit_metadata_link" class="control" accesskey="m">Edit</a>
  <div id="metadata">
    {% if page.metadata %}
      <ul id="metadata">
        {% for attribute in page.metadata.keys() %}
          <li class="datum">{{ pagelink(attribute) }}: {{ pagelink(page.metadata[attribute]) }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="notice">No metadata.</p>
    {% endif %}
  </div>

  <div id="backlinks">
    {% if page.backlinks %}
      <ul id="backlinks">
        {% for attribute in page.backlinks.keys() %}
          <li class="backlink">{{ pagelink(attribute) }} of {{ pagelink(page.backlinks[attribute]) }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="notice">No backlinks.</p>
    {% endif %}
  </div>

  <a href="#" id="edit_description_link" class="control">Edit</a>
  <div id="description">
    {% if page.description %}
      {{ page.description | smart_str | textilize }}
    {% else %}
      <p class="notice">No description.</p>
    {% endif %}
  </div>

  <!-- body...? -->
  
{% endblock %}
{% block sidebar_actions %}
<span class="sidebar_heading">This Page:</span>
<ul>
  <li>
    <a href="#" id="rename_link">rename</a>
    <form id="rename_form" action="{{ url('/rename/%s' % page['name']) }}" style="display: none">
      <input name="newname" type="text" size="15"/>
      <input type="submit" value="Go"/>
      <a href="#" id="rename_cancel">cancel</a>
    </form>
  </li>
  <li>
    <a href="#" id="delete_link">delete</a>
    <span id="delete_prompt" style="display: none">
      really? <a href="{{ url('/delete/%s' % page['name']) }}" id="delete_yes">yes</a>/<a href="#" id="delete_no">no</a>
    </span>
  </li>
</ul>
{% endblock %}